#!/usr/bin/env bash
# Toybox Test Suite, Fist Authored by Rob Landley for Toybox <https://www.landley.net/toybox>
. testing.sh
# testing "name" "command" "result" "infile" "stdin"
CMDNAME="moontool"
CMDPATH="moontool"

testcmd "5/11/1964" '-t "$(date -ud "11 May 1964" +%s)"' "New ðŸŒ‘ (1.2%)\n" "" ""
testcmd "6/15/1981" '-t $(date -u -d "6/15/1981" "+%s")' "Waxing Gibbous ðŸŒ” (93.6%)\n" "" ""
testcmd "1/11/2024" '-t $(date -u -d "1/11/2024" "+%s")' "New ðŸŒ‘ (0.4%)\n" "" ""
testcmd "11/5/2061" '-t $(date -u -d "11/5/2061" "+%s")' "Waxing Gibbous ðŸŒ” (91.7%)\n" "" ""

testcmd "-f"    "-f asd" "asd\n" "" ""
testcmd "-f %%" '-f "%%"' "%\n" "" ""
testcmd "-f %P" '-t $(date -u -d "1/11/2024" "+%s") -f "%P"' "0.4\n" "" ""
testcmd "-f %e" '-t $(date -u -d "1/11/2024" "+%s") -f "%e"' "ðŸŒ‘\n" "" ""
testcmd "-f %s new" '-t $(date -u -d "1/11/2024" "+%s") -f "%s"' "ðŸŒ‘\n" "" ""
testcmd "-f %p"     '-t $(date -u -d "1/11/2024" "+%s") -f "%p"' "New\n" "" ""
